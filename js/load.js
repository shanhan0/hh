$(function() {    var socket = new WebSocket("ws://172.172.33.34:8088/webSocket/lotus");    socket.onmessage = function(msg) {        if(msg.data && msg.data!='连接成功'){            var  response = JSON.parse(msg.data)            if(response[0]['position']=='left'){                ChartContent(response[0].value)            } else if(response[0]['position']=='top'){                titleProgress(response[0].value);            }else if(response[0]['position']=='bottom'){                bottomPower(response[0].value)            }else if(response[0]['position']=='seven'){                bottomSeven(response[0].value)            }        }    };    var titleScale = titleData(); //头部的比例图    titleProgress(titleScale);    var ChargingData = ChargingData(); //左侧    ChartContent(ChargingData);    var bottomContentData = bottomContentData(); //底部 装配基地日用电量趋势曲线    bottomPower(bottomContentData);    var bottomOneContentData = bottomOneContentData(); //底部 、近7日装配基地日总负荷    bottomSeven(bottomOneContentData);    var {CDZ_Today_Direct_Percentage,CDZ_Today_Exchange_Percentage,CDZ_Today_Total, CDZ_Total_Direct_Percentage, CDZ_Total_Exchange_Percentage, CDZ_Total_Zong } = rightPieData(); // 右侧的比例图    //头部    function renderTitleData(response) {        var {Today_Load_Energy,  Day_ElecCons_AsseBase, Today_Other, Total_Load_Energy, Total_ElecCons_AsseBase, Total_Other} = response;        var titleArr = [ Day_ElecCons_AsseBase, Today_Other, Total_ElecCons_AsseBase, Total_Other];        var totalArr = [Today_Load_Energy, Total_Load_Energy];        $('.mainHeader .kpiProgress div h2').html('');        $('.mainHeader .loadKpi h2').html('');        $('.mainHeader .kpiProgress').each(function(i,item){            $(($(item).children())[1]).find('h2').prepend(titleArr[i]+'<span>MWh</span>');        })        $('.mainHeader .loadKpi').each(function(i,item){            $(($(item).children())[1]).prepend(totalArr[i]+'<span>MWh</span>');        })    }    //创建左侧图表，用的首页的option函数，一共三个   function ChartContent(ChargingData){       let chartBarOne = echarts.init( document.getElementById('rightChartContentOne'));       //Charging_Temperature       let optionBarOne = createLoadLineChartOne(ChargingData.Charging_Temperature);       chartBarOne.setOption( optionBarOne );       let chartBarTwo = echarts.init( document.getElementById('rightChartContentTwo'));       let optionBarTwo = createLoadLineChartTwo(ChargingData.Charging_Humidity);       chartBarTwo.setOption( optionBarTwo );       let powerList = [           ['7:00', 51],           ['8:00', 53.5],           ['9.00', 102.5],           ['10.00', 112.5],           ['11.00', 153.5],           ['12.00', 179.5],           ['13.00', 254.5],           ['14.00', 252.5],           ['15.00', 243.5],           ['16.00', 258.5],           ['17.00', 257.5]       ]       let chartBarThree = echarts.init( document.getElementById('rightChartContentThree'));       let optionBarThree = createLoadLineChartOne(ChargingData.Charging_Power || powerList);       chartBarThree.setOption( optionBarThree );   }    // 中间折线    function bottomPower(bottomContentData){        let powerUsageList = [            ['7:00', 400],            ['8:00', 872],            ['9.00', 1800],            ['10.00', 2160],            ['11.00', 2048],            ['12.00', 1824],            ['13.00', 1904],            ['14.00', 2584],            ['15.00', 2328],            ['16.00', 2448],            ['17.00', 2624]        ]        let loadContentOne = echarts.init( document.getElementById('loadContentOne'));        let optionLoadContentOne = createLoadLineChartOne( bottomContentData.Day_ElecCons_AsseBase || powerUsageList);        loadContentOne.setOption( optionLoadContentOne );    }    // 中间柱状图    function bottomSeven(bottomOneContentData){        let loadContentTwo = echarts.init( document.getElementById('loadContentTwo'));        var {Day_ProCons_AsseBase, Day_ZMCons_AsseBase, Day_KTCons_AsseBase,  Day_AQCons_AsseBase} = bottomOneContentData;        let optionLoadContentTwo = createLoadBarChart(Day_ProCons_AsseBase, Day_ZMCons_AsseBase, Day_KTCons_AsseBase,  Day_AQCons_AsseBase);        loadContentTwo.setOption( optionLoadContentTwo );    }    // 中间进度条    function titleProgress(titleScale){        renderTitleData(titleScale)        var {Day_ElecCons_AsseBase_Percentage, Today_Other_Percentage, Total_ElecCons_AsseBase_Percentage, Total_Other_Percentage} = titleScale;        let chartProgressOne = echarts.init( document.getElementById('KPIProgressChartOne'));        let optionProgressOne = createSourceProgress(Day_ElecCons_AsseBase_Percentage || 40);        chartProgressOne.setOption( optionProgressOne );        let chartProgressTwo = echarts.init( document.getElementById('KPIProgressChartTwo'));        let optionProgressTwo = createSourceProgress(Today_Other_Percentage || 40);        chartProgressTwo.setOption( optionProgressTwo );        let chartProgressThree = echarts.init( document.getElementById('KPIProgressChartThree'));        let optionProgressThree = createSourceProgress(Total_ElecCons_AsseBase_Percentage || 40);        chartProgressThree.setOption( optionProgressThree );        let chartProgressFour = echarts.init( document.getElementById('KPIProgressChartFour'));        let optionProgressFour = createSourceProgress(Total_Other_Percentage || 40);        chartProgressFour.setOption( optionProgressFour );        // 中间进度条 end    }    // 右侧pie    let NetworkRightPie = echarts.init( document.getElementById('NetworkRightPieOne'));    let optionNetworkRightPie = initPiechartNetwork(CDZ_Today_Direct_Percentage || 20,CDZ_Today_Exchange_Percentage|| 40,CDZ_Today_Total || 5);    NetworkRightPie.setOption( optionNetworkRightPie );    // 右侧pie    let NetworkRightPieTwo = echarts.init( document.getElementById('NetworkRightPieTwo'));    let optionNetworkRightPieTwo = initPiechartNetwork(CDZ_Total_Direct_Percentage || 20, CDZ_Total_Exchange_Percentage || 40, CDZ_Total_Zong || 5);    NetworkRightPieTwo.setOption( optionNetworkRightPieTwo );    function titleData() {        var arr = [];        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/lotus/getTopData',            success: function (response) {                if (response) {                  arr = response;                }            }        })        return arr;    }    function ChargingData() {        var arr = []        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/lotus/getCurveData',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr    }    function bottomContentData(){ //装配基地日用电量趋势曲线        var arr = []        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/lotus/getBottom',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr    }    function bottomOneContentData(){        var arr = []        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/lotus/getSevenData',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr    }    function rightPieData() {        var arr = []        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/lotus/getRightData',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr    }})