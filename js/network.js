$(function() {    var socket = new WebSocket("ws://172.172.33.34:8088/webSocket/network");    socket.onmessage = function(msg) {        if(msg.data && msg.data!='连接成功'){            var  response = JSON.parse(msg.data)            if(response[0]['position']=='left'){                leftContentFun(response[0].value)            }            else if(response[0]['position']=='right'){            }else if(response[0]['position']=='top'){                progressContent(response[0].value);            }else if(response[0]['position']=='bottom'){                bottombottomProportion(response[0].value)            }        }    };    //创建左侧图表，用的首页的option函数，一共三个    leftContentFun(ChargingData());    progressContent(proportionData());    bottombottomProportion(bottomProportionData());    rightPie(rightData());    function titleContentData(response) {        var {Today_Wf, Today_Gf, Total_Wf, Total_Gf,            Today_OnGrid_Energy, Total_OnGrid_Energy        } = response;        var todayAndTotalArr = [Today_Wf, Today_Gf, Total_Wf, Total_Gf];        var totalArr = [ Today_OnGrid_Energy, Total_OnGrid_Energy];        $('.kpiProgress h2').html('')        $('.first h2').html('')        $('.secondKpi h2').html('')        $('.kpiProgress').each(function(i,item){            $(($(item).children())[1]).find('h2').prepend(todayAndTotalArr[i] + '<span>MWh</span>')        })        var dom = ($('.mainHeader').children()).not('.kpiProgress').not('.mainNav');        dom.each(function(i,item){            $($(item).children()[1]).prepend(totalArr[i] + '<span>MWh</span>')        })    }    function leftContentFun(ChargingData){        let chartBarOne = echarts.init( document.getElementById('ChartNetworkOne'));        let optionBarOne = createNetworkChart(ChargingData.Today_GF_Energy_Earnings, ChargingData.Today_WF_Energy_Earnings );        chartBarOne.setOption( optionBarOne );        let  a = [            ['7.14', 43.86],            ['7.15', 52.14],            ['7.16', 48.00],            ['7.17', 56.28],            ['7.18', 44.69],            ['7.19', 49.66],            ['7.20', 54.62]        ], b = [            ['7.14', 9.14],            ['7.15', 10.86],            ['7.16', 10.00],            ['7.17', 11.72],            ['7.18', 9.31],            ['7.19', 10.34],            ['7.20', 11.38]        ]        let chartBarTwo = echarts.init( document.getElementById('ChartNetworkTwo'));        let optionBarTwo = createNetworkChart( ChargingData.Today_GF_OnGrid_Energy || a, ChargingData.Today_WF_OnGrid_Energy || b);        chartBarTwo.setOption( optionBarTwo );    }    // 中间进度条    function progressContent(proportionData){        titleContentData(proportionData);        let chartProgressOne = echarts.init( document.getElementById('KPIProgressChartOne'));        let optionProgressOne = createSourceProgress(proportionData.Today_Wf_Percentage || 20);        chartProgressOne.setOption( optionProgressOne );        let chartProgressTwo = echarts.init( document.getElementById('KPIProgressChartTwo'));        let optionProgressTwo = createSourceProgress(proportionData.Today_Gf_Percentage || 20);        chartProgressTwo.setOption( optionProgressTwo );        let chartProgressThree = echarts.init( document.getElementById('KPIProgressChartThree'));        let optionProgressThree = createSourceProgress(proportionData.Total_Wf_Percentage || 20);        chartProgressThree.setOption( optionProgressThree );        let chartProgressFour = echarts.init( document.getElementById('KPIProgressChartFour'));        let optionProgressFour = createSourceProgress(proportionData.Total_Gf_Percentage || 20);        chartProgressFour.setOption( optionProgressFour );    }    // 中间内容折线图    function bottombottomProportion(bottomProportionData){        let networkMainChart = echarts.init( document.getElementById('networkMainChart'));        let optionNetworkMainChart = createMainNetwork(bottomProportionData.TIME, bottomProportionData.Power_Curve);        networkMainChart.setOption( optionNetworkMainChart );    }    // 右侧pie    function rightPie(rightData){        var {   Day_Wf_Percentage, Day_Grid_Gf_Percentage, Today_Income, Total_Wf_Percentage, Total_Grid_Gf_Percentage, Total_Income        } = rightData;        let NetworkRightPie = echarts.init( document.getElementById('NetworkRightPieOne'));        let optionNetworkRightPie = initPiechartNetwork(Day_Wf_Percentage || 20, Day_Grid_Gf_Percentage || 40, Today_Income ||  2);        NetworkRightPie.setOption( optionNetworkRightPie );        // 右侧pie        let NetworkRightPieTwo = echarts.init( document.getElementById('NetworkRightPieTwo'));        let optionNetworkRightPieTwo = initPiechartNetwork( Total_Wf_Percentage || 20 , Total_Grid_Gf_Percentage || 40, Total_Income || 2);        NetworkRightPieTwo.setOption( optionNetworkRightPieTwo );    }    //    // // 中间内容折线图    // let mainChartContentOne = echarts.init( document.getElementById('mainChartContentOne'));    // let optionSourceMainChartOne = createMainSourceChartOne();    // mainChartContentOne.setOption( optionSourceMainChartOne );    // // 中间内容折线图    // let mainChartContentTwo= echarts.init( document.getElementById('mainChartContentTwo'));    // let optionSourceMainChartTwo = createMainSourceChartTwo();    // mainChartContentTwo.setOption( optionSourceMainChartTwo );    // // 中间内容折线图    // let mainChartContentThree = echarts.init( document.getElementById('mainChartContentThree'));    // let optionSourceMainChartthree = createMainSourceChartThree();    // mainChartContentThree.setOption( optionSourceMainChartthree );    //左边园区柱形图    function ChargingData() {        var arr = [];        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/network/getLeftGoOnline',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr;    }    //头部所占比例    function proportionData(){        var arr = [];        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/network/getTopData',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr;    }    //底部(电网交互有功功率实时曲线)    function bottomProportionData(){        var arr = [];        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/network/getActivePowerData',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return arr;    }    //右侧的比例图    function rightData(){        var obj = {};        HttpRequest({            type: 'get',            url: 'http://172.172.33.34:8088/v1/network/getGridPercentage',            success: function (response) {                if (response) {                    arr = response;                }            }        })        return obj;         }})